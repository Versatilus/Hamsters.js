module.exports=function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(8)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),s=n(o),u=r(3),f=n(u),l=function(){function e(){a(this,e),this.randomArray=this.randomArray,this.aggregateArrays=this.aggregateThreadOutputs,this.splitArrays=this.splitArrayIntoSubArrays,this.createBlob=this.createDataBlob,this.generateWorkerBlob=this.generateWorkerBlob,this.processDataType=this.processDataType,this.sortOutput=this.sortArray,this.getOutput=this.prepareOutput,this.prepareJob=this.prepareFunction,this.feedHamster=this.messageWorker,this.prepareMeal=this.prepareHamsterFood,this.workerURI=null}return i(e,[{key:"prepareHamsterFood",value:function(e){var t=e.input;for(var r in e.input)e.input.hasOwnProperty(r)&&"array"!==r&&(t[r]=e.input[r]);return t.array=e.input.array,e.hamstersJob&&!t.hamstersJob&&(t.hamstersJob=hamstersJob),t}},{key:"messageWorker",value:function(e,t){return s.default.reactNative?e.postMessage(JSON.stringify(t)):s.default.ie10?e.postMessage(t):s.default.webWorker?e.port.postMessage(t):e.postMessage(t,this.prepareTransferBuffers(t))}},{key:"prepareTransferBuffers",value:function(e){var t=[],r=null;if(s.default.transferrable)for(r in e)e.hasOwnProperty(r)&&e[r]&&(e[r].buffer?t.push(e[r].buffer):Array.isArray(e[r])&&"undefined"!=typeof ArrayBuffer&&t.push(new ArrayBuffer(e[r])));return t}},{key:"prepareFunction",value:function(e){if(!s.default.legacy&&(e=String(e),!s.default.webWorker)){var t=e.indexOf("{")+1,r=e.length-1;return e.substring(t,r)}return e}},{key:"generateWorkerBlob",value:function(e){var t="("+String(e)+")();",r=this.createDataBlob(t);return URL.createObjectURL(r)}},{key:"processDataType",value:function(e,t){return s.default.transferrable?this.typedArrayFromBuffer(e,t):t}},{key:"prepareOutput",value:function(e){return e.aggregate&&1!==e.threads?this.aggregateThreadOutputs(e.output,e.dataType):e.output}},{key:"sortArray",value:function(e,t){switch(t){case"desc":case"asc":return Array.prototype.sort.call(e,function(e,r){return"asc"===t?e-r:r-e});case"ascAlpha":return e.sort();case"descAlpha":return e.reverse();default:return e}}},{key:"typedArrayFromBuffer",value:function(e,t){var r={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,uint8clamped:Uint8ClampedArray,int32:Int32Array,int16:Int16Array,int8:Int8Array,float32:Float32Array,float64:Float64Array};return r[e]?new r[e](t):e}},{key:"locateBlobBuilder",value:function(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:f.default.error("Environment does not support data blobs!")}},{key:"createDataBlob",value:function(e){if("undefined"==typeof Blob){var t=this.locateBlobBuilder(),r=new t;return r.append([e],{type:"application/javascript"}),r.getBlob()}return new Blob([e],{type:"application/javascript"})}},{key:"randomArray",value:function e(t,r){for(var e=[];t>0;)e.push(Math.round(99*Math.random()+1)),t-=1;r(e)}},{key:"aggregateThreadOutputs",value:function(e,t){if(!t||!s.default.transferrable)return e.reduce(function(e,t){return e.concat(t)});var r=0,n=e.length,a=0;for(r;r<n;r+=1)a+=e[r].length;var i=this.processDataType(t,a),o=0;for(r=0;r<n;r+=1)i.set(e[r],o),o+=e[r].length;return i}},{key:"splitArrayIntoSubArrays",value:function(e,t){var r=0,n=[],a=Math.ceil(e.length/t);if(e.slice)for(;r<e.length;)n.push(e.slice(r,r+=a));else for(;r<e.length;)n.push(e.subarray(r,r+=a));return n}}]),e}(),h=new l;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=h)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(1),u=n(s),f=r(5),l=n(f),h=function(){function e(){a(this,e),this.debug=!1,this.importScripts=null,this.memoize=!1,this.persistence=!0,this.legacy=this.isLegacyEnvironment()||!1,this.browser=this.isBrowser(),this.webWorker=this.isWebWorker(),this.node=this.isNode(),this.reactNative=this.isReactNative(),this.shell=this.isShell(),this.transferrable=this.supportsTransferrableObjects(),this.atomics=this.supportsAtomicOperations(),this.proxies=this.supportsProxies(),this.isIE=this.isInternetExplorer,this.logicalThreads=this.determineGlobalThreads(),this.Worker=this.locateWorkerObject(),this.sharedWorker=this.locateSharedWorkerObject(),this.selectHamsterWheel=this.selectHamsterWheel}return o(e,[{key:"determineGlobalThreads",value:function(){var e=4;return"undefined"!=typeof navigator&&("undefined"!=typeof navigator.hardwareConcurrency&&(e=navigator.hardwareConcurrency),e>20&&navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&(e=20)),this.isNode()&&"undefined"!=typeof os&&(e=os.cpus().length),e}},{key:"locateWorkerObject",value:function(){return"undefined"!=typeof Worker?Worker:null}},{key:"locateSharedWorkerObject",value:function(){return"undefined"!=typeof SharedWorker?SharedWorker:null}},{key:"isBrowser",value:function(){return"object"===("undefined"==typeof window?"undefined":i(window))}},{key:"isInternetExplorer",value:function(e){return new RegExp("msie"+(isNaN(e)?"":"\\s"+e),"i").test(navigator.userAgent)}},{key:"isNode",value:function(){return"object"===("undefined"==typeof process?"undefined":i(process))&&!0&&!this.isWebWorker()}},{key:"isWebWorker",value:function(){return"function"==typeof importScripts}},{key:"isReactNative",value:function(){return!this.isNode()&&"object"===("undefined"==typeof global?"undefined":i(global))&&!this.isBrowser()}},{key:"isShell",value:function(){return this.isBrowser()&&!this.isNode()&&!this.isWebWorker()&&!this.isReactNative()}},{key:"isLegacyEnvironment",value:function(){if(this.isBrowser()&&!this.isReactNative()){var e=this.isInternetExplorer(10),t=navigator.userAgent,r="undefined"==typeof this.Worker,n=["Kindle/3.0","Mobile/8F190","IEMobile"];(r||n.indexOf(t)!==-1||e)&&(this.legacy=!0)}if(this.isWebWorker()&&"undefined"!=typeof this.SharedWorker)try{var a=u.default.generateBlob();new this.SharedWorker(a,"SharedHamsterWheel")}catch(e){this.legacy=!0}if(!this.legacy)return this.isShell()||!this.locateWorkerObject()}},{key:"supportsTransferrableObjects",value:function(){return"undefined"!=typeof Uint8Array}},{key:"supportsAtomicOperations",value:function(){return"undefined"!=typeof SharedArrayBuffer}},{key:"supportsProxies",value:function(){return"undefined"!=typeof Proxy}},{key:"selectHamsterWheel",value:function(){return this.reactNative?"./common/rnHamstersWheel.js":this.isIE(10)?"./common/hamstersWheel.js":this.node?l.default.regular:this.legacy?l.default.legacy:this.webWorker?l.default.worker:u.default.generateWorkerBlob(l.default.regular)}}]),e}(),c=new h;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=c)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),s=n(o),u=function(){function e(){a(this,e),this.logBook={error:[],warning:[],info:[]},this.info=this.infoLog,this.warning=this.warningLog,this.error=this.errorLog,this.errorFromThread=this.errorFromThread,this.saveLogEntry=this.saveToLogBook,this.getLogEntries=this.fetchLogBook,this.searchLogEntries=this.searchLogBook}return i(e,[{key:"infoLog",value:function(e){var t=Date.now(),r="Hamsters.js v"+s.default+" Info: "+e+" @ "+t;this.saveLogEntry("info",r),console.info(r)}},{key:"warningLog",value:function(e){var t=Date.now(),r="Hamsters.js v"+s.default+" Warning: "+e+" @ "+t;this.saveLogEntry("warning",r),console.warn(r)}},{key:"errorLog",value:function(e,t){var r=Date.now(),n="Hamsters.js v"+s.default+" Error: "+e+" @ "+r;return this.saveLogEntry("error",n),console.error(n),t?void t(n):n}},{key:"errorFromThread",value:function(e,t){var r="#"+e.lineno+" in "+e.filename+": "+e.message;this.errorLog(r,t)}},{key:"saveToLogBook",value:function(e,t){this.logBook[e].push(t)}},{key:"fetchLogBook",value:function(e){return e?this.logBook[e]:this.logBook}},{key:"findStringInLogBook",value:function(e,t){var r=[],n=0;for(n;n<e.length;n++)e[n].indexOf(t)!==-1&&r.push(e[n]);return r}},{key:"findStringInLogBookAllTypes",value:function(e,t){var r=[],n=void 0,a=void 0,i=null;for(n in e)e.hasOwnProperty(n)&&(i=e[n],a=this.findStringInLogBook(i,t));return r}},{key:"searchLogBook",value:function(e,t){var r=[];return r=t?this.findStringInLogBook(this.logBook[t],string):this.findStringInLogBookAllTypes(this.logBook),{total:r.length,results:r}}}]),e}(),f=new u;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=f)},function(e,t){"use strict";var r=5,n=1,a=1,i=r+"."+n+"."+a;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=i)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_data=__webpack_require__(1),_data2=_interopRequireDefault(_data),_habitat=__webpack_require__(2),_habitat2=_interopRequireDefault(_habitat),wheel=function(){function wheel(){_classCallCheck(this,wheel),this.worker=this.workerScaffold,this.regular=this.regularScaffold,this.legacy=this.legacyScaffold}return _createClass(wheel,[{key:"workerScaffold",value:function workerScaffold(){"undefined"==typeof self&&(self=global||window||this),self.params={},self.rtn={},addEventListener("connect",function(incomingConnection){var port=incomingConnection.ports[0];port.start(),port.addEventListener("message",function(incomingMessage){params=incomingMessage.data,rtn={data:[],dataType:params.dataType,threadStart:Date.now()},params.importScripts&&self.importScripts(params.importScripts),eval("("+params.hamstersJob+")")(),rtn.threadEnd=Date.now(),port.postMessage(rtn)},!1)},!1)}},{key:"regularScaffold",value:function(){function e(e){var r=e.dataType;return r&&(e.data=t(r,e.data)),e}function t(e,t){var r={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,uint8clamped:Uint8ClampedArray,int32:Int32Array,int16:Int16Array,int8:Int8Array,float32:Float32Array,float64:Float64Array};return r[e]?new r[e](t):t}function r(e){var t=[],r=null;for(r in e)e.hasOwnProperty(r)&&e[r]&&(e[r].buffer?t.push(e[r].buffer):Array.isArray(e[r])&&"undefined"!=typeof ArrayBuffer&&t.push(new ArrayBuffer(e[r])));return t}if("undefined"==typeof self){global||window||this}self.params={},self.rtn={},addEventListener("message",function(t){params=t.data,rtn={data:[],dataType:params.dataType?params.dataType.toLowerCase():null,threadStart:Date.now()},params.importScripts&&self.importScripts(params.importScripts),new Function(params.hamstersJob)(),rtn.threadEnd=Date.now(),postMessage(e(rtn),r(rtn))})}},{key:"legacyScaffold",value:function(e,t){var r=this;setTimeout(function(){if("undefined"==typeof n)var n=global||window||r;n.params=e,n.rtn={data:[],threadStart:Date.now()},e.hamstersJob(),rtn.threadEnd=Date.now(),t(rtn)},4)}}]),wheel}(),hamstersWheel=new wheel;"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=hamstersWheel)},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){r(this,e),this.maxCacheEntries=25,this.cacheEntries=[],this.itemCached=this.isItemCached,this.fetchItem=this.fetchItemFromCache,this.saveItem=this.saveItemToCache}return n(e,[{key:"isItemCached",value:function(e,t){return!!this.fetchItem({fn:t,data:e})||!1}},{key:"fetchItemFromCache",value:function(e){var t=null;for(var r in this.cache)this.cache.hasOwnProperty(r)&&e[r].fn===e.fn&&e[r].input===e.data&&(t=e[r].input);return t||!1}},{key:"saveItemToCache",value:function(e,t,r){var n={fn:e,input:t},a=this.cacheEntries;a.length<r?a.push(n):a.splice(0,0,n),this.cacheEntries=a}}]),e}(),i=new a;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=i)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),s=n(o),u=r(2),f=n(u),l=r(3),h=n(l),c=function(){function e(){a(this,e),this.tasks=[],this.threads=[],this.running=[],this.pending=[],this.fetchHamster=this.grabHamster}return i(e,[{key:"addWorkToPending",value:function(e,t,r,n,a,i){this.pending.push(arguments)}},{key:"processQueue",value:function(e){return this.runTask(e[0],e[1],e[2],e[3],e[4])}},{key:"grabHamster",value:function(e,t){return t?this.threads[e]:this.spawnHamster()}},{key:"keepTrackOfThread",value:function(e,t){e.workers.push(t),this.running.push(t)}},{key:"registerTask",value:function(e){var t=this.tasks.push(e);return this.tasks[t-1]}},{key:"spawnHamsters",value:function(e,t){for(h.default.info(t+" Logical Threads Detected, Spawning "+t+" Hamsters"),t;t>0;t--)this.threads.push(this.spawnHamster());h.default.info(this.threads.length+" hamsters ready and awaiting instructions")}},{key:"spawnHamster",value:function(){return f.default.webWorker?new f.default.SharedWorker(f.default.selectHamsterWheel(),"SharedHamsterWheel"):new f.default.Worker(f.default.selectHamsterWheel())}},{key:"prepareMeal",value:function(e,t){var r={array:e};for(var n in t.input)t.input.hasOwnProperty(n)&&["array","threads"].indexOf(n)==-1&&(r[n]=t.input[n]);return r}},{key:"runTask",value:function(e,t,r,n,a){var i=this.running.length,o=this.prepareMeal(e,t);if(this.registerTask(t.id),this.keepTrackOfThread(t,i),f.default.legacy)wheel(o,n,a);else{var u=this.grabHamster(i,r);this.trainHamster(i,t,u,r,n,a),s.default.feedHamster(u,o)}t.count+=1}},{key:"hamsterWheel",value:function(e,t,r,n,a,i){return n===this.running.length?this.addWorkToPending(e,t,r,a,i):this.runTask(e,t,r,a,i)}},{key:"returnOutputAndRemoveTask",value:function(e,t){var r=s.default.getOutput(e,f.default.transferrable);e.sort&&(r=s.default.sortOutput(r,e.sort)),this.tasks[e.id]=null,t({data:r})}},{key:"trainHamster",value:function(e,t,r,n,a,i){function o(i){var o=i.data;u.running.splice(u.running.indexOf(e),1),t.workers.splice(t.workers.indexOf(e),1),f.default.reactNative?t.output[e]=JSON.parse(o.data):t.output[e]=o.data,0===t.workers.length&&t.count===t.threads&&u.returnOutputAndRemoveTask(t,a),0!==u.pending.length&&u.processQueue(u.pending.shift()),n||f.default.webWorker||r.terminate()}function s(e){h.default.errorFromThread(e,i)}var u=this;f.default.webWorker?(r.port.onmessage=o,r.port.onerror=s):(r.onmessage=o,r.onerror=s)}},{key:"scheduleTask",value:function(e,t,r){var n=this,a=[];return e.input.array&&1!==e.threads&&(a=s.default.splitArrays(e.input.array,e.threads)),new Promise(function(i,o){for(var s=0;s<e.threads;)a&&1!==e.threads?n.hamsterWheel(a[s],e,t,r,i,o):n.hamsterWheel(e.input.array,e,t,r,i,o),s+=1})}}]),e}(),d=new c;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=d)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),s=n(o),u=r(2),f=n(u),l=r(7),h=n(l),c=r(1),d=n(c),p=r(5),y=(n(p),r(3)),g=n(y),v=r(6),m=n(v),k=function(){function e(){a(this,e),this.version=s.default,this.maxThreads=f.default.logicalThreads,this.habitat=f.default,this.data=d.default,this.pool=h.default,this.logger=g.default,this.memoizer=m.default,this.run=this.hamstersRun,this.promise=this.hamstersPromise,this.init=this.initializeLibrary}return i(e,[{key:"initializeLibrary",value:function(e){this.logger.info("Preparing the hamster wheels & readying hamsters"),"undefined"!=typeof e&&this.processStartOptions(e),!f.default.legacy&&f.default.persistence&&h.default.spawnHamsters(f.default.persistence,this.maxThreads),delete this.init}},{key:"processStartOptions",value:function(e){var t=["worker","sharedworker","legacy","webworker","reactnative","atomics","proxies","transferrable","browser","shell","node","debug","persistence","importscripts"];for(var r in e)e.hasOwnProperty(r)&&(t.indexOf(r.toLowerCase())!==-1?this.habitat[r]=e[r]:this[r]=e[r]);"function"==typeof this.habitat.Worker&&(this.habitat.legacy=!1)}},{key:"hamstersTask",value:function(e,t,r){this.id=r.pool.tasks.length,this.count=0,this.aggregate=e.aggregate||!1,this.output=[],this.workers=[],this.memoize=e.memoize||!1,this.dataType=e.dataType?e.dataType.toLowerCase():null,this.input=e,f.default.legacy?(this.threads=1,this.input.hamstersJob=t):(this.threads=e.threads||1,this.input.hamstersJob=r.data.prepareJob(t))}},{key:"hamstersPromise",value:function(e,t){var r=this;return new Promise(function(n,a){var i=new r.hamstersTask(e,t,r);r.pool.scheduleTask(i,r.habitat.persistence,r.maxThreads).then(function(e){n(e)}).catch(function(e){g.default.error(e.messsage,a)})})}},{key:"hamstersRun",value:function(e,t,r,n){var a=new this.hamstersTask(e,t,this);this.pool.scheduleTask(a,this.habitat.persistence,this.maxThreads).then(function(e){r(e)}).catch(function(e){g.default.error(e.messsage,n)})}}]),e}(),b=new k;"undefined"!=typeof e&&"undefined"!=typeof e.exports&&(e.exports=b)}]);
//# sourceMappingURL=hamsters.node.min.js.map